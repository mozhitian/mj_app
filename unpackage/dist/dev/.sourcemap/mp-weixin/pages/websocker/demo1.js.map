{"version":3,"sources":["webpack:///E:/phpstudy/WWW/aassdd/main.js","webpack:///E:/phpstudy/WWW/aassdd/pages/websocker/demo1.vue?b85c","webpack:///E:/phpstudy/WWW/aassdd/pages/websocker/demo1.vue?5b16","webpack:///E:/phpstudy/WWW/aassdd/pages/websocker/demo1.vue?4d81","webpack:///E:/phpstudy/WWW/aassdd/pages/websocker/demo1.vue?0fc8","webpack:///E:/phpstudy/WWW/aassdd/pages/websocker/demo1.vue"],"names":["createPage","Page","name","props","list","data","value","remain","$store","state","count","methods","closePopup","e","console","log","hh","display","JSON","stringify","check","i","length","j","$refs","popup","close","components","uniPopup","watch","handler","valArr","oldVal","val","arr","split","type","peo","gcmc","wtbh","message","uni","getStorageSync","peoArr","my_name","dlzt","open","request","url","apiServer","flag","method","dataType","header","success","res","fail","error","deep"],"mappings":"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","file":"pages/websocker/demo1.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/websocker/demo1.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./demo1.vue?vue&type=template&id=2ecafe7c&name=websocket&\"\nimport script from \"./demo1.vue?vue&type=script&lang=js&\"\nexport * from \"./demo1.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('2ecafe7c', component.options)\n    } else {\n      api.reload('2ecafe7c', component.options)\n    }\n    module.hot.accept(\"./demo1.vue?vue&type=template&id=2ecafe7c&name=websocket&\", function () {\n      api.rerender('2ecafe7c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"phpstudy/WWW/aassdd/pages/websocker/demo1.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./demo1.vue?vue&type=template&id=2ecafe7c&name=websocket&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./demo1.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./demo1.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport uniPopup from \"@/components/uni-popup/uni-popup.vue\"\nexport default {\n\tname: \"websocket\",\n\tprops: {\n\t\tlist: {}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tvalue: '',\n\t\t\tremain:this.$store.state.count\n\t\t}\n\t},\n\tmethods: {\n\t\tclosePopup(e) {\n\t\t\tconsole.log(e);\n\t\t\tthis.hh=false;\n\t\t\tthis.remain[e].display=false;\n\t\t\tconsole.log(JSON.stringify(this.remain));\n\t\t\tthis.check();\n\t\t},\n\t\tcheck(){\n\t\t\tfor(var i=0;i<this.remain.length;i++){\n\t\t\t\tvar j=0;\n\t\t\t\tif(this.remain[i].display==true){\n\t\t\t\t\tj++\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(j==0){\n\t\t\t\tthis.$refs.popup.close();\n\t\t\t}\n\t\t}\n\t},\n\t// mounted() {\n\t// \tthis.$refs.popup.open()\n\t// },\n\tcomponents: {\n\t\tuniPopup\n\t},\n\twatch: {\n\t\t//消息推送\n\t\t// 进程提醒:送检委托-草稿箱提交,提醒试验部\n\t\t// 派工检测-收样-收样提交至试验草稿箱，提醒试验部\n\t\t// 派工检测-收样-延期提交至试验草稿箱，提醒试验部\n\t\t// 派工检测-试验-已完成提交到检测报告-草稿箱，提醒技术部\n\t\t// 检测报告-批准提交到项目结算的草稿箱，提醒财务部\n\t\t// 项目结算-草稿箱提交至待提交，提醒经办人\n\t\t//签名使用提醒\n\t\t'$store.state.count': {\n\t\t\thandler: function(valArr, oldVal) {\n\t\t\t\tif (valArr) {//valArr,数组嵌套对象，格式为[{value:\"\"}]\n\t\t\t\t\tfor(var j=0;j<valArr.length;j++){\n\t\t\t\t\t\tvar val=valArr[j].value;\n\t\t\t\t\t\tvar arr = (val||\"\").split(\"|\");\n\t\t\t\t\t\tvar type = arr[0];//类型\n\t\t\t\t\t\tvar peo = arr[1];//提醒人员，多个，格式为\"人员1;人员2;\"\n\t\t\t\t\t\tvar gcmc=arr[2];//工程名称\n\t\t\t\t\t\tvar wtbh=arr[3];//委托编号\n\t\t\t\t\t\tswitch (type) {//根据类型1至6筛选消息的内容\n\t\t\t\t\t\t\tcase '1':\n\t\t\t\t\t\t\t\tvar message = gcmc+':编号'+wtbh+'的任务待处理(收样-草稿)'\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '2':\n\t\t\t\t\t\t\t\tvar message = gcmc+':编号'+wtbh+'的任务待处理(试验-草稿)'\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '3':\n\t\t\t\t\t\t\t\tvar message = gcmc+':编号'+wtbh+'的任务待处理(检测-草稿)'\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '4':\n\t\t\t\t\t\t\t\tvar message = gcmc+':编号'+wtbh+'的任务待处理(项目结算-签发结算)'\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '5':\n\t\t\t\t\t\t\t\tvar message = gcmc+':编号'+wtbh+'的任务已完成，请催甲方缴费'\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '6':\n\t\t\t\t\t\t\t\tvar message = gcmc+':'+peo+'在编号'+wtbh+'的任务中使用了您的签名'\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst value = uni.getStorageSync('setUserData');//读取缓存中的人员信息\n\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\tvar peoArr = (peo||'').split(\";\");//切割为数组\n\t\t\t\t\t\t\tfor (var i = 0; i < peoArr.length; i++) {\n\t\t\t\t\t\t\t\tif (value.my_name == peoArr[i]&&value.dlzt==true) {//提醒人员和登录人员的信息(名字)一致且人员处于登录状态\n\t\t\t\t\t\t\t\t\tthis.remain[j].value=message;\n\t\t\t\t\t\t\t\t\tthis.$refs.popup.open();\n\t\t\t\t\t\t\t\t\t//删除已读的消息\n\t\t\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\t\t\turl: this.apiServer + '/basicdata/components/message.php',\n\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\tflag:\"delect\",\n\t\t\t\t\t\t\t\t\t\t\ttype:type,\n\t\t\t\t\t\t\t\t\t\t\tpeo:peoArr[i],\n\t\t\t\t\t\t\t\t\t\t\twtbh:wtbh,\n\t\t\t\t\t\t\t\t\t\t\tgcmc:gcmc\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded', //POST头信息\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(res.data);\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tfail: (error) => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// console.log(JSON.stringify(peoArr));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t}\n\n}\n"],"sourceRoot":""}